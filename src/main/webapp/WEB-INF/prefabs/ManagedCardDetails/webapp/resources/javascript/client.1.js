!function o(s,a,c){function u(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[t]={exports:{}};s[t][0].call(i.exports,function(e){return u(s[t][1][e]||e)},i,i.exports,o,s,a,c)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){var c=Object.create||function(e){function t(){}return t.prototype=e,new t},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=c(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,a=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),i=0===u.x}catch(e){i=!1}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]):(o=e._events=c(null),e._eventsCount=0),s){if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=l(e))&&0<i&&s.length>i){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else s=o[t]=n,++e._eventsCount;return e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.call(d,r);return i.listener=n,r.wrapFn=i}function h(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length):[]}function m(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');a=e}}):r.defaultMaxListeners=a,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){var t,n,r,i,o,s,a="error"===e;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=s[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=v(e,r),o=0;o<r;++o)i[o].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=v(e,i),s=0;s<i;++s)o[s].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,s=v(e,o),a=0;a<o;++a)s[a].call(n,r,i)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var s=e.length,a=v(e,s),c=0;c<s;++c)a[c].call(n,r,i,o)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=v(e,i),s=0;s<i;++s)o[s].apply(n,r)}(n,u,this,i)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return f(this,e,t,!1)},r.prototype.prependListener=function(e,t){return f(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=c(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=c(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=c(null):delete n[e]),this;if(0===arguments.length){var i,o=s(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=c(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return h(this,e,!0)},r.prototype.rawListeners=function(e){return h(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},r.prototype.listenerCount=m,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],2:[function(e,t,n){var o=e("ipaddr.js");function i(e,t){try{var n=o.process(e);if(-1===t.indexOf("/")){var r=o.process(t);return"ipv6"===n.kind()&&"ipv6"===r.kind()?n.toNormalizedString()===r.toNormalizedString():n.toString()==r.toString()}var i=o.parseCIDR(t);return n.match(i)}catch(e){return!1}}t.exports=function(e,t){if("string"==typeof t)return i(e,t);if("object"==typeof t){for(var n=!1,r=0;r<t.length;r++)if(i(e,t[r])){n=!0;break}return n}}},{"ipaddr.js":3}],3:[function(e,a,t){(function(){var c,r,e,t,n,u,i;function o(e,t){var n,r,i,o,s,a;if(16===e.length)for(this.parts=[],n=r=0;r<=14;n=r+=2)this.parts.push(e[n]<<8|e[n+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(i=0,o=(a=this.parts).length;i<o;i++)if(!(0<=(s=a[i])&&s<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}function s(e){var t,n,r;if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");for(t=0,n=e.length;t<n;t++)if(!(0<=(r=e[t])&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}r={},null!=a&&a.exports?a.exports=r:this.ipaddr=r,i=function(e,t,n,r){var i,o;if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(i=0;0<r;){if((o=n-r)<0&&(o=0),e[i]>>o!=t[i]>>o)return!1;r-=n,i+=1}return!0},r.subnetMatch=function(e,t,n){var r,i,o,s,a;for(o in null==n&&(n="unicast"),t)for(!(s=t[o])[0]||s[0]instanceof Array||(s=[s]),r=0,i=s.length;r<i;r++)if(a=s[r],e.kind()===a[0].kind()&&e.match.apply(e,a))return o;return n},r.IPv4=(s.prototype.kind=function(){return"ipv4"},s.prototype.toString=function(){return this.octets.join(".")},s.prototype.toNormalizedString=function(){return this.toString()},s.prototype.toByteArray=function(){return this.octets.slice(0)},s.prototype.match=function(e,t){var n;if(void 0===t&&(e=(n=e)[0],t=n[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return i(this.octets,e.octets,8,t)},s.prototype.SpecialRanges={unspecified:[[new s([0,0,0,0]),8]],broadcast:[[new s([255,255,255,255]),32]],multicast:[[new s([224,0,0,0]),4]],linkLocal:[[new s([169,254,0,0]),16]],loopback:[[new s([127,0,0,0]),8]],carrierGradeNat:[[new s([100,64,0,0]),10]],private:[[new s([10,0,0,0]),8],[new s([172,16,0,0]),12],[new s([192,168,0,0]),16]],reserved:[[new s([192,0,0,0]),24],[new s([192,0,2,0]),24],[new s([192,88,99,0]),24],[new s([198,51,100,0]),24],[new s([203,0,113,0]),24],[new s([240,0,0,0]),4]]},s.prototype.range=function(){return r.subnetMatch(this,this.SpecialRanges)},s.prototype.toIPv4MappedAddress=function(){return r.IPv6.parse("::ffff:"+this.toString())},s.prototype.prefixLengthFromSubnetMask=function(){var e,t,n,r,i,o,s;for(s={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:e=0},i=!1,t=n=3;0<=n;t=n+=-1){if(!((r=this.octets[t])in s))return null;if(o=s[r],i&&0!==o)return null;8!==o&&(i=!0),e+=o}return 32-e},s),e="(0?\\d+|0x[a-f0-9]+)",t={fourOctet:new RegExp("^"+e+"\\."+e+"\\."+e+"\\."+e+"$","i"),longValue:new RegExp("^"+e+"$","i")},r.IPv4.parser=function(e){var i,o,s,n,r;if(o=function(e){return"0"===e[0]&&"x"!==e[1]?parseInt(e,8):parseInt(e)},i=e.match(t.fourOctet))return function(){var e,t,n,r;for(r=[],e=0,t=(n=i.slice(1,6)).length;e<t;e++)s=n[e],r.push(o(s));return r}();if(i=e.match(t.longValue)){if(4294967295<(r=o(i[1]))||r<0)throw new Error("ipaddr: address outside defined range");return function(){var e,t;for(t=[],n=e=0;e<=24;n=e+=8)t.push(r>>n&255);return t}().reverse()}return null},r.IPv6=(o.prototype.kind=function(){return"ipv6"},o.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},o.prototype.toRFC5952String=function(){var e,t,n,r,i;for(r=/((^|:)(0(:|$)){2,})/g,i=this.toNormalizedString(),e=0,t=-1;n=r.exec(i);)n[0].length>t&&(e=n.index,t=n[0].length);return t<0?i:i.substring(0,e)+"::"+i.substring(e+t)},o.prototype.toByteArray=function(){var e,t,n,r,i;for(e=[],t=0,n=(i=this.parts).length;t<n;t++)r=i[t],e.push(r>>8),e.push(255&r);return e},o.prototype.toNormalizedString=function(){var e,i,t;return e=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.parts).length;e<t;e++)i=n[e],r.push(i.toString(16));return r}.call(this).join(":"),t="",this.zoneId&&(t="%"+this.zoneId),e+t},o.prototype.toFixedLengthString=function(){var e,i,t;return e=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.parts).length;e<t;e++)i=n[e],r.push(i.toString(16).padStart(4,"0"));return r}.call(this).join(":"),t="",this.zoneId&&(t="%"+this.zoneId),e+t},o.prototype.match=function(e,t){var n;if(void 0===t&&(e=(n=e)[0],t=n[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return i(this.parts,e.parts,16,t)},o.prototype.SpecialRanges={unspecified:[new o([0,0,0,0,0,0,0,0]),128],linkLocal:[new o([65152,0,0,0,0,0,0,0]),10],multicast:[new o([65280,0,0,0,0,0,0,0]),8],loopback:[new o([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new o([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new o([0,0,0,0,0,65535,0,0]),96],rfc6145:[new o([0,0,0,0,65535,0,0,0]),96],rfc6052:[new o([100,65435,0,0,0,0,0,0]),96],"6to4":[new o([8194,0,0,0,0,0,0,0]),16],teredo:[new o([8193,0,0,0,0,0,0,0]),32],reserved:[[new o([8193,3512,0,0,0,0,0,0]),32]]},o.prototype.range=function(){return r.subnetMatch(this,this.SpecialRanges)},o.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},o.prototype.toIPv4Address=function(){var e,t,n;if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return e=(n=this.parts.slice(-2))[0],t=n[1],new r.IPv4([e>>8,255&e,t>>8,255&t])},o.prototype.prefixLengthFromSubnetMask=function(){var e,t,n,r,i,o,s;for(s={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:e=0},i=!1,t=n=7;0<=n;t=n+=-1){if(!((r=this.parts[t])in s))return null;if(o=s[r],i&&0!==o)return null;16!==o&&(i=!0),e+=o}return 128-e},o),n="(?:[0-9a-f]+::?)+",u={zoneIndex:new RegExp("%[0-9a-z]{1,}","i"),native:new RegExp("^(::)?("+n+")?([0-9a-f]+)?(::)?(%[0-9a-z]{1,})?$","i"),transitional:new RegExp("^((?:"+n+")|(?:::)(?:"+n+")?)"+e+"\\."+e+"\\."+e+"\\."+e+"(%[0-9a-z]{1,})?$","i")},c=function(i,e){var t,n,o,r,s,a;if(i.indexOf("::")!==i.lastIndexOf("::"))return null;for((a=(i.match(u.zoneIndex)||[])[0])&&(a=a.substring(1),i=i.replace(/%.+$/,"")),t=0,n=-1;0<=(n=i.indexOf(":",n+1));)t++;if("::"===i.substr(0,2)&&t--,"::"===i.substr(-2,2)&&t--,e<t)return null;for(s=e-t,r=":";s--;)r+="0:";return":"===(i=i.replace("::",r))[0]&&(i=i.slice(1)),":"===i[i.length-1]&&(i=i.slice(0,-1)),{parts:e=function(){var e,t,n,r;for(r=[],e=0,t=(n=i.split(":")).length;e<t;e++)o=n[e],r.push(parseInt(o,16));return r}(),zoneId:a}},r.IPv6.parser=function(e){var t,n,r,i,o,s,a;if(u.native.test(e))return c(e,8);if((i=e.match(u.transitional))&&(a=i[6]||"",(t=c(i[1].slice(0,-1)+a,6)).parts)){for(n=0,r=(s=[parseInt(i[2]),parseInt(i[3]),parseInt(i[4]),parseInt(i[5])]).length;n<r;n++)if(!(0<=(o=s[n])&&o<=255))return null;return t.parts.push(s[0]<<8|s[1]),t.parts.push(s[2]<<8|s[3]),{parts:t.parts,zoneId:t.zoneId}}return null},r.IPv4.isIPv4=r.IPv6.isIPv6=function(e){return null!==this.parser(e)},r.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(e){return!1}},r.IPv4.isValidFourPartDecimal=function(e){return!(!r.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},r.IPv6.isValid=function(e){var t;if("string"==typeof e&&-1===e.indexOf(":"))return!1;try{return new this((t=this.parser(e)).parts,t.zoneId),!0}catch(e){return!1}},r.IPv4.parse=function(e){var t;if(null===(t=this.parser(e)))throw new Error("ipaddr: string is not formatted like ip address");return new this(t)},r.IPv6.parse=function(e){var t;if(null===(t=this.parser(e)).parts)throw new Error("ipaddr: string is not formatted like ip address");return new this(t.parts,t.zoneId)},r.IPv4.parseCIDR=function(e){var t,n,r;if((n=e.match(/^(.+)\/(\d+)$/))&&0<=(t=parseInt(n[2]))&&t<=32)return r=[this.parse(n[1]),t],Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r;throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},r.IPv4.subnetMaskFromPrefixLength=function(e){var t,n,r;if((e=parseInt(e))<0||32<e)throw new Error("ipaddr: invalid IPv4 prefix length");for(r=[0,0,0,0],n=0,t=Math.floor(e/8);n<t;)r[n]=255,n++;return t<4&&(r[t]=Math.pow(2,e%8)-1<<8-e%8),new this(r)},r.IPv4.broadcastAddressFromCIDR=function(e){var t,n,r,i,o;try{for(r=(t=this.parseCIDR(e))[0].toByteArray(),o=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[],n=0;n<4;)i.push(parseInt(r[n],10)|255^parseInt(o[n],10)),n++;return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},r.IPv4.networkAddressFromCIDR=function(e){var t,n,r,i,o;try{for(r=(t=this.parseCIDR(e))[0].toByteArray(),o=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[],n=0;n<4;)i.push(parseInt(r[n],10)&parseInt(o[n],10)),n++;return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},r.IPv6.parseCIDR=function(e){var t,n,r;if((n=e.match(/^(.+)\/(\d+)$/))&&0<=(t=parseInt(n[2]))&&t<=128)return r=[this.parse(n[1]),t],Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},r.isValid=function(e){return r.IPv6.isValid(e)||r.IPv4.isValid(e)},r.parse=function(e){if(r.IPv6.isValid(e))return r.IPv6.parse(e);if(r.IPv4.isValid(e))return r.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},r.parseCIDR=function(t){try{return r.IPv6.parseCIDR(t)}catch(e){try{return r.IPv4.parseCIDR(t)}catch(t){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},r.fromByteArray=function(e){var t;if(4===(t=e.length))return new r.IPv4(e);if(16===t)return new r.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},r.process=function(e){var t;return"ipv6"===(t=this.parse(e)).kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t}}).call(this)},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./lib/client"))},{"./lib/client":12}],5:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o,s=e("./VerificationFlow"),a=e("./Providers/Common/SumSub"),c=(o=s.VerificationFlow,i(u,o),u.prototype.getPath=function(e){return"https://build.weavr.io/app/secure/api/session/kyi/params/"+e+"/get"},u.prototype.loadAndLaunch=function(e){var t=new a.SumSub(this.options);return t.load(function(){t.launch(e)}),t},u.prototype.init=function(e){this.options=e,this.launch({reference:e.reference})},u.prototype.launch=function(e){this.getParamsLoadAndLaunch(this.authToken,e.reference)},u);function u(e,t){var n=o.call(this)||this;return n.uiKey=e,n.authToken=t,n}n.ConsumerVerificationFlow=c},{"./Providers/Common/SumSub":8,"./VerificationFlow":9}],6:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o,s=e("./CorporateVerificationFlow"),a=(o=s.CorporateVerificationFlow,i(c,o),c.prototype.getPath=function(e){return"https://build.weavr.io/app/secure/api/session/beneficiaries/params/"+e+"/get"},c);function c(){return null!==o&&o.apply(this,arguments)||this}n.CorporateBeneficiariesVerificationFlow=a},{"./CorporateVerificationFlow":7}],7:[function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o,s=e("./VerificationFlow"),a=e("./Providers/Common/SumSub"),c=(o=s.VerificationFlow,i(u,o),u.prototype.getPath=function(e){return"https://build.weavr.io/app/secure/api/session/kyi/params/"+e+"/get"},u.prototype.init=function(e){this.options=e,this.launch({reference:e.reference})},u.prototype.loadAndLaunch=function(e){var t=new a.SumSub(this.options);return t.load(function(){t.launch(e)}),t},u.prototype.launch=function(e){this.getParamsLoadAndLaunch(this.authToken,e.reference)},u);function u(e){var t=o.call(this)||this;return t.authToken=e,t}n.CorporateVerificationFlow=c},{"./Providers/Common/SumSub":8,"./VerificationFlow":9}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(i.prototype.load=function(e){var t=document.createElement("script");t.onload=function(){e()}.bind(this),t.src="https://test-api.sumsub.com/idensic/static/sns-websdk-builder.js",document.head.appendChild(t)},i.prototype.onMessage=function(e,t){"idCheck.onApplicantSubmitted"===e&&this.opts.onMessage("kycSubmitted")},i.prototype.onError=function(e){this.opts.onError("serviceProviderError")},i.prototype.launch=function(t){var e={lang:"en",onMessage:this.onMessage.bind(this),onError:this.onError.bind(this),uiConf:{customCss:this.opts.customCss,customCssStr:this.opts.customCssStr},clientId:"weavr"};snsWebSdk.Builder(this.apiUrl,t.verificationFlow).withAccessToken(t.accessToken,function(e){e(t.accessToken)}).withConf(e).build().launch(this.opts.selector)},i);function i(e){this.apiUrl="https://test-api.sumsub.com",this.opts=e,void 0===this.opts.onMessage&&(this.opts.onMessage=function(){}),void 0===this.opts.onError&&(this.opts.onError=function(){})}n.SumSub=r},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../index"),i=e("../../server/contract"),o=(s.prototype.getParamsLoadAndLaunch=function(e,t){var n=this;this.getParams(e,t,function(e){n.loadAndLaunch(e)})},s.prototype.getParams=function(e,t,n){var r={url:this.getPath(t),method:i.FetchRequestMethod.POST,authToken:e};this.doProxyRequest(r,function(e){n(e.params)})},s.prototype.doProxyRequest=function(e,t,n){r.action("PROXY",e,t,n)},s);function s(){}n.VerificationFlow=o},{"../../server/contract":18,"../index":12}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../CorporateVerificationFlow"),i=(o.prototype.init=function(e,t,n,r){if(this._selector=e,this._auth=t,this._listener=n,this._options=r,void 0!==t.reference)return this.initV2();this.initV1()},o.prototype.initV1=function(){var e=document.createElement("script");e.onload=function(){window.idensic.init(this._selector,this.config,this._listener)}.bind(this),e.src="https://test-api.sumsub.com/idensic/static/sumsub-kyc.js",document.head.appendChild(e)},o.prototype.initV2=function(){var e={selector:this._selector,reference:this._auth.reference,onMessage:this.onMessage,customCssStr:this._options.customCss};return new r.CorporateVerificationFlow(this.authToken).init(e)},o.prototype.onMessage=function(e,t){this._listener(e,t)},Object.defineProperty(o.prototype,"config",{get:function(){var e={clientId:"weavr",externalUserId:this._auth.externalUserId,accessToken:this._auth.accessToken,includedCountries:["AUT","BEL","BGR","CYP","CZE","DEU","DNK","ESP","EST","FIN","FRA","GBR","GIB","HRV","HUN","IRL","ITA","ISL","GRC","LIE","LTU","LUX","LVA","MLT","NLD","NOR","POL","PRT","ROU","SVK","SVN","SWE"],excludedCountries:null,navConf:{showWarningScreen:!1,skipWelcomeScreen:!0,skipReviewScreen:!0,skipAgreementsScreen:!0,registration:"disabled"},uiConf:{customCssStr:"",lang:"en",steps:{APPLICANT_DATA:{customFields:null},COMPANY:{title:"Company Verification",subTitle:"Step 1: Business Details",instructions:"**You can pause and resume this process at any time.**                            \n\nKindly upload the following documents                                \n* Copy of  the Certificate of Incorporation                                \n* Copy of the Articles of Association (last amendment)                                \n* Proof of Business Address such as a copy of a bank statement or lease agreement in the name of the business                                \n* Recent commercial registry extract clearly showing company structure including UBOs                                \n* UBO Declaration Form (download link below)                                \n\n\nDownload UBO Declaration form [here](https://storage.cloud.google.com/weavr-cdn/UBO-a.pdf). In case of difficulties, please contact kyb@weavr.io\n",subTitleUbo:"Step 2: Ultimate Beneficial Owners (UBOs)",instructionsUbo:"Please name the individuals who are considered to be ultimate beneficial owners and own at least 25% of the company. If no single individual owns at least 25% of the company, enter the details of the individual with the highest level of ownership.",subTitleRepresentative:"Step 3: Directors and Representatives",instructionsRepresentative:"After submitting the form all the individuals will be followed up via emails with a request to go through a standard KYC/AML procedure.",individualBeneficiaryFields:{ubo:[{name:"firstName",required:!0},{name:"lastName",required:!0},{name:"middleName",required:!1},{name:"dob",required:!0},{name:"nationality",required:!0}],representative:[{name:"firstName",required:!0},{name:"lastName",required:!0},{name:"middleName",required:!1},{name:"nationality",required:!0},{name:"dob",required:!0},{name:"phone",required:!0},{name:"email",required:!0}]},companyBeneficiaryFields:[{name:"companyName",required:!0},{name:"registrationNumber",required:!0},{name:"country",required:!0},{name:"legalAddress",required:!0},{name:"email",required:!0},{name:"phone",required:!0},{name:"incorporatedOn",required:!0}],skipEmailsToIndividuals:{ubo:!0,shareholder:!0,representative:!0},generateIndividualsWebsdkUrls:!1,individualsWebsdkUrlsLivetime:1800,requireUBOsBeneficiaries:!0,beneficiaryRequiredIdDocs:{docSets:[{idDocSetType:"IDENTITY",types:["ID_CARD","PASSPORT"],fields:[{name:"firstName",required:!0},{name:"lastName",required:!0},{name:"buildingNumber",required:!1},{name:"flatNumber",required:!1},{name:"street",required:!1},{name:"subStreet",required:!1},{name:"town",required:!1},{name:"state",required:!1},{name:"postCode",required:!1},{name:"country",required:!1}]},{idDocSetType:"SELFIE",types:["SELFIE"],videoRequired:"liveness"},{idDocSetType:"PROOF_OF_RESIDENCE",types:["UTILITY_BILL"]},{idDocSetType:"APPLICANT_DATA",types:["DRIVERS","BANK_STATEMENT","OTHER"]}]}},REVIEW:{instructions:"Step Review: Instructions"},STATUS:{pending:{title:"We are reviewing your documents. This process usually takes up to 3 business days.",instructions:"Your documents are under review. The status of your account will change automatically once the review is completed. If you experience any difficulties, please contact customer support."}},APPLICANT_REQUEST:{title:"Start Verification for your business",button:"Upload Documents"}}},documentsByCountries:{}};return this._options&&this._options.customCss&&(e.uiConf.customCssStr=this._options.customCss),e},enumerable:!0,configurable:!0}),o);function o(e){this.authToken=e}n.KYBSumSub=i},{"../CorporateVerificationFlow":7}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../CorporateBeneficiariesVerificationFlow"),i=(o.prototype.init=function(e,t,n,r){if(this._selector=e,this._auth=t,this._listener=n,this._options=r,void 0!==t.reference)return this.initV2();this.initV1()},o.prototype.initV1=function(){var e=document.createElement("script");e.onload=function(){window.idensic.init(this._selector,this.config,this._listener)}.bind(this),e.src="https://test-api.sumsub.com/idensic/static/sumsub-kyc.js",document.head.appendChild(e)},o.prototype.initV2=function(){var e={selector:this._selector,reference:this._auth.reference,onMessage:this.onMessage,customCssStr:this._options.customCss};return new r.CorporateBeneficiariesVerificationFlow(null).init(e)},o.prototype.onMessage=function(e,t){this._listener(e,t)},Object.defineProperty(o.prototype,"config",{get:function(){var e={clientId:"weavr",externalUserId:this._auth.externalUserId,accessToken:this._auth.accessToken,includedCountries:null,excludedCountries:null,navConf:{showWarningScreen:!1,skipWelcomeScreen:!0,skipAgreementsScreen:!1,skipReviewScreen:!1,registration:"disabled"},uiConf:{lang:"en",steps:{CREATE_APPLICANT:{title:"Start Identity Verification",instructions:"To get your identity verified please prepare your identity documents - Passport or National ID card.  Please make sure that your document is valid.  \n\nYou will also need to provide two documents for Proof of Address including a Bank Statement and a Utility Bill.",agreements:["I do confirm that the information that I provide is not fake or forged."]},IDENTITY:{stepName:"Proof of Identity",title:"Proof of Identity",subTitle:"Please choose the country of your document. Then fill in and check your personal information is accurate."},SELFIE:{stepName:"Selfie",title:"Selfie"},PROOF_OF_RESIDENCE:{stepName:"Proof of Address #1",title:"Proof of Address",subTitle:"Please upload a document which clearly shows that your postal address matches the one entered previously."},APPLICANT_DATA:{stepName:"Proof of Address #2",title:"Proof of Address",subTitle:"Please upload another document as proof of address.  You can upload a driver's licence, bank statement or other document.",instructions:"Other document types accepted \n* Tax returns \n* Utility Bills \n* Council tax bills \n* Internet/Cable TV/House phone line bills \n*Government issued Certificates of Residency, etc "}}},documentsByCountries:{}};return this._options&&this._options.customCss&&(e.uiConf.customCssStr=this._options.customCss),e},enumerable:!0,configurable:!0}),o);function o(){}n.KYCSumSub=i},{"../CorporateBeneficiariesVerificationFlow":6}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function o(){}var s,a,c,u=e("../common/utils"),l=e("../common/uid"),f=e("events"),r=e("../helpers"),i=e("./VerificationFlow/ConsumerVerificationFlow"),d=e("./VerificationFlow/v1/KYBSumSub"),p=e("./VerificationFlow/v1/KYCSumSub"),h=e("../server/common"),m="https://build.weavr.io/app/secure/static/server.1.html",v=u.determineOrigin(m)||"",y="__opc_uxsec_",g="__opc-uxsec-",w={},b={},_={},E={},A={init:function(e,t){if(!e||"string"!=typeof e)throw new Error("Public API key required and should be a string");if(s)throw new Error("UX security already initialised. You can only initialise once");t=u.filterProperties(t,["fonts"]),S("INIT",{apiKey:s=e},o,function(e){throw e});var n=t.fonts||[],r=n.filter(function(e){return!("cssSrc"in e)||"string"!=typeof e.cssSrc}),i=n.filter(function(e){return"cssSrc"in e&&"string"==typeof e.cssSrc});c=Object.assign({},t,{fonts:r||[]}),i.length?S("FETCH_FONT",i,function(e){e.length&&(c.fonts=c.fonts.concat(e),T(he,{action:"opc-uxsec-ready",payload:{}}))},function(e){window.console&&console.error(e.message),T(he,{action:"opc-uxsec-ready",payload:{}})}):T(he,{action:"opc-uxsec-ready",payload:{}})},associate:function(e,t,n){if(!s)throw new Error("UX security not initialised. call init(apikey)");if(e&&"string"!=typeof e)throw new Error("associate requires string authToken");S("ASSOCIATE",(a=e)?{authToken:e}:{},t,n)},form:function(){if(!s)throw new Error("UX security not initialised. call init(apikey)");return new P},kyb:function(){return new d.KYBSumSub(a)},kyc:function(){return new p.KYCSumSub},consumer_kyc:function(){return new i.ConsumerVerificationFlow(s,a)},span:function(e,t,n){if(!s)throw new Error("UX security not initialised. call init(apikey)");if(!e||"string"!=typeof e)throw new Error("Span requires string field");if(!t||"string"!=typeof t)throw new Error("Span requires string token");n=u.filterProperties(n,["className","autocorrect","style"]);var r=function(e,t,n){var r={id:l.next("span"),field:e,eventEmitter:new f.EventEmitter,className:oe,destroyed:!1};r.eventEmitter.setMaxListeners(0);var i=document.createElement("div");i.className=g+"span",fe(i,U);var o=M("span",e,n);return function(e,t,n){T(he,{action:"opc-uxsec-create-span",payload:{frameId:e.id,field:t,token:n}})}(o,e,t),r.component=i,(r.frame=o).eventEmitter.on("ready",function(){return r.eventEmitter.emit("ready")}),H(r),o.eventEmitter.on("change",function(){return r.eventEmitter.emit("change")}),k(o,i),Y(r,n.style,!0),ae(r,n.className),r}(e,t,Object.assign({},n,c,{loaded:he.loaded,wait:!1}));return(_[r.id]=r).eventEmitter.on("destroy",function(){delete _[r.id]}),new ue(r.id)}};function S(e,t,n,r){var i=l.next(e);E[i]={resolve:n,reject:r},T(he,{action:"opc-uxsec-root-action",payload:{type:e,nonce:i,data:t||{}}})}function I(e,t){T(he,{action:"opc-uxsec-root-report",payload:{event:e,data:t||{}}})}n.action=S;var P=(x.prototype.input=function(e,t,n){var r=this;if(!e||"string"!=typeof e)throw new Error("Input requires string name");if(!t||"string"!=typeof t)throw new Error("Input requires string path");if(b[this._id][e])throw new Error("Input with name "+e+" already created for this form");var i=[];Object.keys(h.FIELDS).forEach(function(e){h.FIELDS[e].requiresAuthentication&&i.push(e)}),void 0===a&&i.includes(t)&&(console.warn("Missing user authentication token."),console.warn(t+" field requires the user to be authenticated.")),n=u.filterProperties(n,["classNames","placeholder","autocorrect","style","maxlength"]);var o=function(e,t,n){var r={formId:e,field:t,eventEmitter:new f.EventEmitter,classes:Object.assign({},W),destroyed:!1,focused:!1,empty:!0,invalid:!1,valid:!1,autofilled:!1};r.eventEmitter.setMaxListeners(0),r.eventEmitter.on("submit",function(e){for(var t=e.component.parentElement;t&&"FORM"!==t.nodeName;)t=t.parentElement;if(t){var n=document.createEvent("Event");n.initEvent("submit",!0,!0),t.dispatchEvent(n)}}.bind(null,r)),r.focusListener=ee.bind(null,r);var i=document.createElement("div");i.className=g+"input";var o=document.createElement("input");o.type="text",o.className=g+"input__fake",fe(i,U),fe(o,G),o.setAttribute("aria-hidden","true"),o.disabled=!0,o.addEventListener("focus",function(){return D(s)});var s=M("input",t,n);return function(e,t){T(he,{action:"opc-uxsec-create-input",payload:{frameId:e.id,formId:t}})}(s,e),r.component=i,r.fakeInput=o,(r.frame=s).eventEmitter.on("load",function(){return o.disabled=!1}),s.eventEmitter.on("ready",function(){return r.eventEmitter.emit("ready")}),H(r),s.eventEmitter.on("change",function(e){r.eventEmitter.emit("change",{error:e.error,empty:e.empty,valid:e.valid,extra:e.extra}),r.empty=e.empty,r.invalid=!!e.error,r.valid=e.valid,J(r)}),s.eventEmitter.on("redirectfocus",function(e){var t=function(e,t){var n=Array.prototype.slice.call(document.querySelectorAll("a[href], area[href], input:not([disabled]),\n  select:not([disabled]), textarea:not([disabled]), button:not([disabled]),\n  object, embed, *[tabindex], *[contenteditable]")),o=[];n.forEach(function(e){var t=e.getAttribute("tabindex"),n=!t||0<=parseInt(t,10),r=e.getBoundingClientRect(),i=0<r.width&&0<r.height;n&&i&&o.push(e)});for(var r=-1,i=0;i<o.length;i++)if(o[i]===e||e.contains(o[i])){r=i;break}return o[r+("previous"===t?-1:1)]}(r.component,e.focusDirection);t&&t.focus()}),s.eventEmitter.on("focus",function(){r.focused=!0,J(r),r.eventEmitter.emit("focus")}),s.eventEmitter.on("blur",function(){r.focused=!1,J(r),r.eventEmitter.emit("blur")}),s.eventEmitter.on("keyup",function(e){r.eventEmitter.emit("keyup",{key:e.key,preventDefault:function(){}})}),s.eventEmitter.on("autofill",function(){if(r.parent){var e=r.parent.style.backgroundColor,t="#faffbd"===e||"rgb(250, 255, 189)"===e;r.lastBackgroundColor=t?r.lastBackgroundColor:e,r.parent.style.backgroundColor="#faffbd",r.autofilled=!0,J(r)}}),s.eventEmitter.on("autofill-cleared",function(){r.autofilled=!1,r.parent&&(r.parent.style.backgroundColor=r.lastBackgroundColor||""),J(r)}),k(s,i),i.appendChild(o),Q(r,n,!0),X(r,n.classNames),r}(this._id,t,Object.assign({},n,c,{formId:this._id,name:e,loaded:he.loaded,wait:!1}));return(b[this._id][e]=o).eventEmitter.on("destroy",function(){delete b[r._id][e]}),new re(this,e)},x.prototype.tokenize=function(e,t){S("TOKENIZE",{formId:this._id},e,t)},x.prototype.destroy=function(){if(Object.keys(b[this._id]).length)throw new Error("Destroy inputs before destroying form");return delete b[this._id],this},x);function x(){this._id=l.next("form"),b[this._id]={}}function O(e,t,n,r){var i=u.determineOrigin(window.location.toString()),o=u.urlEncodeQueryString(Object.assign({},r,{type:t,field:n,origin:i})),s=document.createElement("iframe");s.setAttribute("frameborder","0"),s.setAttribute("allowTransparency","true"),s.setAttribute("scrolling","no"),s.setAttribute("name",e),s.setAttribute("id","secure-frame"),s.src=m+"#"+o;var a=new f.EventEmitter;a.setMaxListeners(0);var c={id:e,loaded:!1,queuedMessages:[],iframe:s,eventEmitter:a};return a.on("load",function(){c.loaded=!0,C(c),c.loaded&&(c.queuedMessages.forEach(function(e){return T(c,e)}),c.queuedMessages=[])}),c}function C(e){j(e)||L(e)}function k(e,t){t.appendChild(e.iframe)}function L(e){e.loaded=!1}function j(e){return document.body&&document.body.contains(e.iframe)}function T(e,t){if(C(e),e.loaded){var n=v;e.iframe.contentWindow.postMessage(JSON.stringify(Object.assign({},t,{id:e.id,__ixSecV1:!0})),n)}else e.queuedMessages.push(t)}n.SecureForm=P;var F={border:"none",margin:"0",padding:"0",width:"1px","min-width":"100%",overflow:"hidden",display:"block",visibility:"hidden",position:"fixed",height:"1px","pointer-events":"none"};function N(){if(C(he),!j(he))if(document.body)k(he,document.body);else if("complete"===document.readyState||"interactive"===document.readyState)throw new Error("No <body> element found.")}var R={border:"none",margin:"0",padding:"0",width:"1px","min-width":"100%",overflow:"hidden",display:"block"};function M(e,t,n){var r=l.next(y),i=document.body&&window.getComputedStyle(document.body),o=!!i&&"rtl"===i.getPropertyValue("direction"),s=O(r,e,t,Object.assign({rtl:o},n));return s.iframe.setAttribute("title","Secure "+e+" frame"),fe(s.iframe,R),w[r]=s}function q(e,t){T(e,{action:"opc-uxsec-update",payload:t})}function V(t,n){Object.keys(n).forEach(function(e){return t.iframe.style[e]=n[e]})}function D(e){e.loaded&&T(e,{action:"opc-uxsec-focus",payload:{}})}var U={margin:"0",padding:"0",border:"none",display:"block",background:"transparent",position:"relative",opacity:"1"};function B(e){if(e.destroyed)throw new Error("Element already destroyed")}function z(e){return document.body&&document.body.contains(e.component)}function $(e,t){if(B(e),!t)throw new Error("Either element or xpath required");var n;if("string"==typeof t){var r=document.querySelectorAll(t);if(1<r.length)window.console&&console.warn("Found "+r.length+" matches - using first");else if(!r.length)throw new Error("Found 0 matches");n=r[0]}else{if(!t.appendChild)throw new Error("Either element or xpath required");n=t}if("INPUT"===n.nodeName)throw new Error("Can only mount in elements that can contain child elements e.g. div");return n.children.length&&window.console&&console.warn("Mounted to an element that contains child nodes which will be removed"),n}function H(s){s.frame.eventEmitter.on("dimensions",function(e){if(s.parent){var t=window.getComputedStyle(s.parent);if(t){var n=parseFloat(t.getPropertyValue("height"));if("border-box"===t.getPropertyValue("box-sizing")){var r=parseFloat(t.getPropertyValue("padding-top")),i=parseFloat(t.getPropertyValue("padding-bottom"));n=n-parseFloat(t.getPropertyValue("border-top"))-parseFloat(t.getPropertyValue("border-bottom"))-r-i}0!==n&&de(n)<de(e.height)&&I("wrapper_height_mismatch",{height:e.height,outer_height:n});var o=s.component.getBoundingClientRect().height;0!==o&&0!==e.height&&de(o)!==de(e.height)&&(V(s.frame,{height:e.height+"px"}),I("iframe_height_update",{height:e.height,calculated_height:o}))}}})}function Y(e,t,n){var r="string"==typeof(t=t||{}).height&&t.height,i="string"==typeof t.lineHeight&&t.lineHeight,o="string"==typeof t.fontSize&&t.fontSize;if(n||r||i||o){var s=r||u.determineHeight(i||e.lastHeight,o||e.lastFontSize);V(e.frame,{height:s}),e.lastFontSize=o||e.lastFontSize,e.lastHeight=i||e.lastHeight}}function K(e,t){var n=window.getComputedStyle(t),r=!!n&&"rtl"===n.getPropertyValue("direction");for(e.parent=t;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(e.component),T(e.frame,{action:"opc-uxsec-mount",payload:{rtl:r}})}var W={base:"opc-uxsec-input",focus:"opc-uxsec-input--focus",valid:"opc-uxsec-input--valid",invalid:"opc-uxsec-input--invalid",empty:"opc-uxsec-input--empty",autofill:"opc-uxsec-input--autofill"},G={border:"none",display:"block",position:"absolute",height:"1px",top:"0",left:"0",padding:"0",margin:"0",width:"100%",opacity:"0",background:"transparent",pointerEvents:"none"};function Z(e,t){K(e,t),function(e){if(e.parent){var t=e.parent.getAttribute("id"),n=void 0;if(t&&(n=document.querySelector("label[for="+t+"]")),n)e.parent.addEventListener("click",e.focusListener);else{for(n=e.parent.parentElement;n&&"LABEL"!==n.nodeName;)n=n.parentElement;n?(e.label=n).addEventListener("click",e.focusListener):e.parent.addEventListener("click",e.focusListener)}}}(e),J(e)}function J(e){e.parent&&u.applyClasses(e.parent,[[e.classes.base,!0],[e.classes.empty,e.empty],[e.classes.focus,e.focused],[e.classes.valid,e.valid],[e.classes.invalid,e.invalid],[e.classes.autofill,e.autofilled]])}function X(e,t){if(t){var n={};Object.keys(t).forEach(function(e){if(!W[e])throw new Error(e+" is not in "+Object.keys(W).join(", "));n[e]=t[e]}),e.classes=Object.assign({},e.classes,n)}}function Q(e,t,n){Y(e,t&&t.style&&t.style.base,n)}function ee(e){B(e),event&&event.preventDefault(),D(e.frame)}function te(e){B(e),T(e.frame,{action:"opc-uxsec-clear",payload:{}})}function ne(e){B(e);var t,n=e.component.parentElement;n&&(n.removeChild(e.component),n.removeEventListener("click",e.focusListener),(t=e).parent&&u.applyClasses(t.parent,[[t.classes.base,!1],[t.classes.empty,!1],[t.classes.focus,!1],[t.classes.valid,!1],[t.classes.invalid,!1],[t.classes.autofill,!1]])),e.parent=null,e.label&&(e.label.removeEventListener("click",e.focusListener),e.label=null),e.fakeInput.disabled=!0,L(e.frame)}var re=(ie.prototype.update=function(e){return e=u.filterProperties(e,["classNames","placeholder","style","maxlength"]),function(e,t){if(B(e),t){X(e,t&&t.classNames),Q(e,t);var n=u.filterProperties(t,["classNames"],!0);Object.keys(n).length&&q(e.frame,n)}}(b[this._form._id][this._name]),this},ie.prototype.focus=function(){return ee(b[this._form._id][this._name]),this},ie.prototype.blur=function(){return B(e=b[this._form._id][this._name]),(t=e.frame).loaded&&(t.iframe.contentWindow.blur(),t.iframe.blur()),e.fakeInput.blur(),this;var e,t},ie.prototype.mount=function(e){return function(e,t){var n=$(e,t);if(n===e.component.parentElement)z(e)||(ne(e),Z(e,n));else if(e.component.parentElement){if(z(e))throw new Error("Already mounted - unmount() before re-mounting.");ne(e),Z(e,n)}else Z(e,n)}(b[this._form._id][this._name],e),this},ie.prototype.clear=function(){return te(b[this._form._id][this._name]),this},ie.prototype.unmount=function(){return ne(b[this._form._id][this._name]),this},ie.prototype.destroy=function(){return(e=b[this._form._id][this._name]).destroyed||(ne(e),e.destroyed=!0,e.eventEmitter.emit("destroy"),T(he,{action:"opc-uxsec-destroy",payload:{frameId:e.frame.id}})),this;var e},ie.prototype.addListener=function(e,t){return b[this._form._id][this._name].eventEmitter.addListener(e,t),this},ie.prototype.on=function(e,t){return this.addListener(e,t)},ie.prototype.removeListener=function(e,t){return b[this._form._id][this._name].eventEmitter.removeListener(e,t),this},ie.prototype.off=function(e,t){return this.removeListener(e,t)},ie.prototype.removeAllListeners=function(e){return b[this._form._id][this._name].eventEmitter.removeAllListeners(e),this},ie);function ie(e,t){this._form=e,this._name=t}n.SecureInput=re;var oe="opc-uxsec-span";function se(e,t){var n;K(e,t),(n=e).parent&&u.applyClasses(n.parent,[[n.className,!0]])}function ae(e,t){t&&(e.className=t)}function ce(e){B(e);var t,n=e.component.parentElement;n&&(n.removeChild(e.component),(t=e).parent&&u.applyClasses(t.parent,[[t.className,!1]])),e.parent=null,L(e.frame)}var ue=(le.prototype.update=function(e){return function(e,t){if(B(e),t){ae(e,t&&t.className),Y(e,t.style);var n=u.filterProperties(t,["className"],!0);Object.keys(n).length&&q(e.frame,n)}}(_[this._id]),this},le.prototype.mount=function(e){return function(e,t){var n=$(e,t);if(n===e.component.parentElement)z(e)||(ce(e),se(e,n));else if(e.component.parentElement){if(z(e))throw new Error("Already mounted - unmount() before re-mounting");ce(e),se(e,n)}else se(e,n)}(_[this._id],e),this},le.prototype.unmount=function(){return ce(_[this._id]),this},le.prototype.destroy=function(){return(e=_[this._id]).destroyed||(ce(e),e.destroyed=!0,e.eventEmitter.emit("destroy"),T(he,{action:"opc-uxsec-destroy",payload:{frameId:e.frame.id}})),this;var e},le.prototype.addListener=function(e,t){return _[this._id].eventEmitter.addListener(e,t),this},le.prototype.on=function(e,t){return this.addListener(e,t)},le.prototype.removeListener=function(e,t){return _[this._id].eventEmitter.removeListener(e,t),this},le.prototype.off=function(e,t){return this.removeListener(e,t)},le.prototype.removeAllListeners=function(e){return _[this._id].eventEmitter.removeAllListeners(e),this},le);function le(e){this._id=e}function fe(e,t){e.style.cssText=Object.keys(t).map(function(e){return e+": "+t[e]+" !important;"}).join(" ")}function de(e){return parseFloat(e.toFixed(1))}n.SecureSpan=ue;var pe,he=((pe=O(y+"root","root","root")).iframe.setAttribute("aria-hidden","true"),pe.iframe.setAttribute("tabIndex","-1"),fe(pe.iframe,F),"complete"===document.readyState?N():(document.addEventListener("DOMContentLoaded",N),window.addEventListener("load",N)),window.addEventListener("message",function(e){var t=function(e){try{var t="string"==typeof e?JSON.parse(e):e;return t.__ixSecV1?u.filterProperties(t,["id","action","payload"]):null}catch(e){return null}}(e.data);t&&u.compareOrigins(v,e.origin)&&function(e){switch(e.action){case"opc-uxsec-element-event":var t=w[e.id];t&&t.eventEmitter.emit(e.payload.event,e.payload.data);break;case"opc-uxsec-element-error":throw new Error(e.payload.error);case"opc-uxsec-root-load":he.eventEmitter.emit("load"),Object.keys(w).forEach(function(e){return T(w[e],{action:"opc-uxsec-root-load",payload:{}})});break;case"opc-uxsec-root-action-complete":var n=E[e.payload.nonce];n&&(delete E[e.payload.nonce],n.resolve&&n.resolve(e.payload.result));break;case"opc-uxsec-root-action-error":var r=E[e.payload.nonce];r&&(delete E[e.payload.nonce],r.reject&&r.reject(new Error(e.payload.error)))}}(t)}),pe),me=window.location.protocol;if(!(-1!==["https:","file:"].indexOf(me))){if(!r.isLocal(window.location.hostname))throw new Error("UX security only available over HTTPS");window.console&&console.warn("Live UX security only available over HTTPS. Switch to HTTPS outside of testing")}window.OpcUxSecureClient?window.console&&console.warn("OPC UxSecurity client.js loaded multiple times"):window.OpcUxSecureClient=A},{"../common/uid":13,"../common/utils":14,"../helpers":15,"../server/common":17,"./VerificationFlow/ConsumerVerificationFlow":5,"./VerificationFlow/v1/KYBSumSub":10,"./VerificationFlow/v1/KYCSumSub":11,events:1}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=0;n.next=function(e){return e+r++}},{}],14:[function(e,t,n){"use strict";function i(e){var t=document.createElement("a");t.href=e;var n=t.protocol,r=t.host;return"http:"===n?r=r.replace(/:80$/,""):"https:"===n&&(r=r.replace(/:443$/,"")),n+"//"+r}Object.defineProperty(n,"__esModule",{value:!0}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),n.getFrameByName=function(e,t){return e.frames[t]},n.merge=function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Array.isArray(e[0])?[]:{};return e.forEach(function(t){t&&Object.keys(t).forEach(function(e){!r[e]||"object"!=typeof r[e]||r[e].constructor!==Object&&r[e].constructor!==Array||"object"!=typeof t[e]?t[e]&&(r[e]=t[e]):r[e]=n(r[e],t[e])})}),r},n.filterProperties=function(e,t,n){var r={};for(var i in e)if(e.hasOwnProperty(i)){var o=t.indexOf(i);(n?o<0:0<=o)&&(r[i]=e[i])}return r},n.equals=function t(n,r){if("object"!=typeof n||"object"!=typeof r)return n===r;if(null===n||null===r)return n===r;var e=Array.isArray(n);if(e!==Array.isArray(r))return!1;var i="[object Object]"===Object.prototype.toString.call(n);if(i!=("[object Object]"===Object.prototype.toString.call(r)))return!1;if(!i&&!e)return!1;var o=Object.keys(n),s=Object.keys(r);if(o.length!==s.length)return!1;for(var a={},c=0;c<o.length;c++)a[o[c]]=!0;for(c=0;c<s.length;c++)a[s[c]]=!0;var u=Object.keys(a);return u.length===o.length&&u.every(function(e){return t(n[e],r[e])})},n.determineOrigin=i,n.compareOrigins=function(e,t){var n=i(e),r=t&&i(t);return n&&r&&n===r},n.urlEncodeQueryString=function i(o,s){var a=[];return Object.keys(o).forEach(function(e){var t=o[e],n=s?s+"["+e+"]":e;if(t)if("object"==typeof t){var r=i(t,n);""!==r&&a.push(r)}else a.push(n+"="+encodeURIComponent(String(t)))}),a.join("&").replace(/%20/g,"+")},n.determineHeight=function(e,t){if(/^[0-9.]+px$/.test(e=e||"1.2em"))return e;t=t||"14px";var n=parseFloat(e.toString().replace(/[^0-9.]/g,"")),r=parseFloat(t.toString().replace(/[^0-9.]/g,""));/^[0-9.]+px$/.test(t)||(r*=parseFloat("14px".replace(/[^0-9.]/g,"")));var i=n*r+"px";return/^[0-9.]+px$/.test(i)?i:"100%"},n.applyClasses=function(e,t){var n={};t.forEach(function(t){return t[0].split(/\s+/).forEach(function(e){return e&&(n[e]=n[e]||t[1])})}),e.className=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function e(t,n){for(var r=n.length,i=0;i<r;++i){var o=n[i];if(o)if("string"==typeof o)for(var s=o.split(/\s+/),a=s.length,c=0;c<a;c++)t[s[c]]=!0;else if(Array.isArray(o))e(t,o);else if("object"==typeof o)for(var u in o)o.hasOwnProperty(u)&&(t[u]=!!o[u]);else"number"==typeof o&&(t[o]=!0)}return t}({},e),r=[];for(var i in n)n[i]&&r.push(i);return r.join(" ")}(e.className,n)}},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./is-local");n.isLocal=r.isLocal},{"./is-local":16}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("ip-range-check"),i={static:["localhost","127.0.0.1","0.0.0.0"],subnets:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16"]};n.isLocal=function(e){return void 0===e&&(e=""),e||window.location.hostname,void 0===(n=e)&&(n=""),!!i.static.find(function(e){return e===n})||(void 0===(t=e)&&(t=""),!!r(t,i.subnets));var t,n}},{"ip-range-check":2}],17:[function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(r,"__esModule",{value:!0});var u=e("../common/utils"),o=e("events");r.SECURE_LOCATION="https://build.weavr.io/app/secure/static/server.1.html",r.SECURE_ORIGIN=u.determineOrigin(r.SECURE_LOCATION)||"",r.FRAME_ID_PREFIX="__opc_uxsec_";var s=u.getFrameByName(window.parent,r.FRAME_ID_PREFIX+"root"),a=(c.prototype.report=function(e,t){this._sendOrQueueRootMessage({action:"opc-uxsec-report",payload:{event:e,data:Object.assign({},t,{type:this._type})}})},c.prototype.load=function(){this._sendOrQueueRootMessage({id:this._id,action:"opc-uxsec-element-load",payload:{}}),this.event("load")},c.prototype.error=function(e){l({id:this._id,action:"opc-uxsec-element-error",payload:{error:e}})},c.prototype.event=function(e,t){l({id:this._id,action:"opc-uxsec-element-event",payload:{event:e,data:t||{}}})},c.prototype._setupPostMessage=function(){var n=this;window.addEventListener("message",function(e){var t=function(e){try{var t="string"==typeof e?JSON.parse(e):e;return t.__ixSecV1?u.filterProperties(t,["id","action","payload"]):null}catch(e){return null}}(e.data);t&&(u.compareOrigins(r.SECURE_ORIGIN,"null"!==e.origin?e.origin:null)?n._handleSecure(t):n._handleParent(t))})},c.prototype._sendOrQueueRootMessage=function(e){if(this._loaded){var t=r.SECURE_ORIGIN;s.postMessage(JSON.stringify(Object.assign({},e,{id:this._id,__ixSecV1:!0})),t)}else this._queuedMessages.push(e)},c.prototype._handleSecure=function(t){var n=this;switch(t.action){case"opc-uxsec-root-init":this._eventEmitter.emit("root-init");break;case"opc-uxsec-root-update":this._eventEmitter.emit("root-update",t.payload);break;case"opc-uxsec-element-request":this._requestHandler(t.payload,function(e){n._sendOrQueueRootMessage({action:"opc-uxsec-element-request-complete",payload:{nonce:t.payload.nonce,result:e}})},function(e){n._sendOrQueueRootMessage({action:"opc-uxsec-element-request-error",payload:{nonce:t.payload.nonce,error:e.message}})})}},c.prototype._handleParent=function(e){var t=this;switch(e.action){case"opc-uxsec-root-load":this._loaded=!0,this._queuedMessages.forEach(function(e){return t._sendOrQueueRootMessage(e)}),this._queuedMessages=[];break;case"opc-uxsec-update":this._eventEmitter.emit("user-update",e.payload);break;case"opc-uxsec-mount":this._eventEmitter.emit("user-mount",e.payload);break;case"opc-uxsec-focus":window.focus(),this._eventEmitter.emit("user-focus");break;case"opc-uxsec-clear":this._eventEmitter.emit("user-clear")}},c);function c(e,t,n){this._type=e,this._id=window.name,this._loaded=t,this._requestHandler=n,this._queuedMessages=[],this._eventEmitter=new o.EventEmitter,this._eventEmitter.setMaxListeners(0),this._setupPostMessage()}function l(e){window.parent.postMessage(JSON.stringify(Object.assign({},e,{__ixSecV1:!0})),"*")}r.Controller=a,r.fetch=function e(t,n,r,i){var o,s="GET"===t.method&&t.data?t.url+"?"+u.urlEncodeQueryString(t.data):t.url,a="GET"===t.method?"":t.data,c=new XMLHttpRequest;t.timeout&&(o=setTimeout(function(){return c.abort()},t.timeout)),t.withCredentials&&(c.withCredentials=t.withCredentials),c.open(t.method,s,!0),Object.keys(n).forEach(function(e){return c.setRequestHeader(e,n[e])}),c.onreadystatechange=function(){4===c.readyState&&(clearTimeout(o),c.onreadystatechange=function(){},0===c.status?t.withCredentials?i(new d):e(Object.assign({},t,{withCredentials:!0}),n,r,i):r(c))};try{c.send(JSON.stringify(a))}catch(t){i(t)}};var f,d=(f=Error,n(p,f),p);function p(){return null!==f&&f.apply(this,arguments)||this}function h(n,r){return Object.keys(r).forEach(function(e){n[e]||new Error("Unrecognized property: "+e)}),Object.keys(n).forEach(function(e){var t=n[e](r[e]);t&&(r[e]=t)}),r}function m(e,t){if("string"!=typeof t)throw new Error("Invalid "+e+": "+JSON.stringify(t));return t}function v(e,t,n){var r=m(t,n);if(!r.match(e))throw new Error("Invalid "+t+": "+n);return r}function y(t){return function(e){return e&&t(e)}}r.validate=h,r.validateBoolean=function(e,t){if("boolean"==typeof t)return t;if("true"===t)return!0;if("false"===t)return!1;throw new Error("Invalid "+e+": "+JSON.stringify(t))},r.validateString=m,r.validateStringRegex=v,r.validateOptional=y,r.validateFonts=function(e){if(!Array.isArray(e))throw new Error("Invalid fonts: "+JSON.stringify(e));return e.forEach(function(e){return w(e)}),e};var g=/^[a-zA-Z0-9-]*$/,w=h.bind(null,{src:function(e){var t=m("src",e);if(!t.match(/(?:(?:^|,)[ ]*(?:local\([-_a-zA-Z0-9\s'"]*\)|url\("?'?(?:https:\/\/|data:)[#?&=;,a-zA-Z0-9-+_\/.:]*"?'?\))[ ]*(?:format\("?'?[-a-zA-Z0-9]*"?'?\))?)+$/))throw new Error("Invalid src: "+e);return t.replace(/((?:url|format)\()([^)]*)(\))/g,function(e,t,n,r){return t+window.encodeURI(n)+r})},family:v.bind(null,/^[-_a-zA-Z0-9\s'"]*$/,"family"),unicodeRange:y(v.bind(null,/^[-U+A-Fa-f0-9?, ]*$/,"unicodeRange")),variant:y(v.bind(null,/^[a-zA-Z0-9-()\s]*$/,"variant")),stretch:y(v.bind(null,g,"stretch")),style:y(v.bind(null,g,"style")),weight:y(v.bind(null,g,"weight"))}),b={family:"font-family",src:"src",unicodeRange:"unicode-range",style:"font-style",variant:"font-variant",stretch:"font-stretch",weight:"font-weight"};r.renderFontsCss=function(e){var r="";return e&&e.forEach(function(t){var n="";Object.keys(t).forEach(function(e){n+=b[e]+": "+t[e]+";"}),r+="@font-face {"+n+"}\n"}),r},r.validateStyle=function(t){if("object"!=typeof t)throw new Error("Invalid style: "+JSON.stringify(t));return Object.keys(t).forEach(function(e){if(!(e in E))throw new Error("Unrecognized variant: "+e);var n=t[e];if("object"!=typeof n)throw new Error("Invalid variant: "+JSON.stringify(t));Object.keys(n).forEach(function(e){if(e in A)n[e]=_(e)(n[e]);else{if(!(e in S))throw new Error("Unrecognized "+(/^:/.test(e)?"pseudo-class":"property")+": "+e);var t=n[e];Object.keys(t).forEach(function(e){if(!A[e])throw new Error("Unrecognized property: "+e);t[e]=_(e)(t[e])})}})}),t};var _=function(e){return y(v.bind(null,/^[#a-zA-Z0-9-_\s,"'().]*$/,e))},E={base:"",empty:".is-empty",valid:".is-valid",invalid:".is-invalid"},A={color:"color",fontFamily:"font-family",fontSize:"font-size",fontSmoothing:"-webkit-font-smoothing",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",height:"height",letterSpacing:"letter-spacing",lineHeight:"line-height",margin:"margin",padding:"padding",textAlign:"text-align",textDecoration:"text-decoration",textIndent:"text-indent",textShadow:"text-shadow",textTransform:"text-transform"},S={":focus":!0,":hover":!0,"::placeholder":!0,"::selection":!0,":-webkit-autofill":!0};function I(e,t){var n=".secure-element__element"+(E[e]||"");if(t)switch(t){case"::placeholder":return[n+"::-webkit-input-placeholder",n+"::-moz-placeholder",n+":-ms-input-placeholder",n+"::placeholder"];case"::selection":return[n+"::-moz-selection",n+"::selection"];case":focus":case":hover":case":-webkit-autofill":return[n+t]}return[n]}function P(t){return Object.keys(t).map(function(e){if(e in A)return"fontSmoothing"!==e||"antialiased"!==t.fontSmoothing&&"grayscale"!==t.fontSmoothing?"  "+A[e]+": "+t[e]+";\n":"  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n"}).join("")}r.renderStyleCss=function(o){var s="";return o&&Object.keys(o).forEach(function(e){var n,r,i,t;s+=(r=o[n=e],i="",t=P(r),I(n).map(function(e){i+=e+" {\n"+t+"}\n"}),Object.keys(r).map(function(e){if(!(e in A)){var t=P(r[e]);I(n,e).map(function(e){i+=e+" {\n"+t+"}\n"})}}),i)}),s},r.validateAutocorrect=function(e,t){if(m(e,t),t.length%2!=0)throw new Error("Invalid "+e+": "+t);var n=t.slice(0,t.length/2),r=t.slice(t.length/2);if(!n.match(/^[a-zA-Z0-9-?() #@!%]*$/))throw new Error("Invalid "+e+": "+t);if(!r.match(/^[ F]*[?F]*$/))throw new Error("Invalid "+e+": "+t);return t},r.autocorrect=function(e,t,n,r){t=t||"";var i="",o=(n=n||{start:0,end:0}).start,s=n.end;function a(e){o>=i.length+u.length-e&&(o+=e),s>=i.length+u.length-e&&(s+=e)}var c=e.length/2,u="",l="",f=!1,d=0,p=0;e:for(;p<c;){var h=e.charAt(p);switch(e.charAt(c+p)){case"?":f=!0;case" ":if(d>=t.length)break e;var m=void 0;switch(h){case"0":m=/^[0-9]$/;break;case"A":m=/^[A-Z]$/;break;case"a":m=/^[a-z]$/;break;default:m=/^[0-9A-Za-z]$/}t.charAt(d).match(m)?(i+=u+t.charAt(d),u="",l+=t.charAt(d),d++,p++):(r=null,d++,a(-1));break;case"F":t.charAt(d)===h?(u+=h,d++,p++):"Delete"===r?(u+=h,d++,p++,r=null):"Backspace"===r?(0<i.length?(i=i.slice(0,i.length-1),l=l.slice(0,l.length-1),p-=u.length+1,u="",a(-1)):(u+=h,d++,p++),r=null):(u+=h,a(1),p++)}}return{formatted:i+u,value:l,selection:{start:o,end:s},valid:f=f||p===c}},r.FIELDS={password:{permanent:!1,focusedType:"password",blurredType:"password",label:"Password",maxContent:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",requiresAuthentication:!1},passwordNumeric:{permanent:!1,focusedType:"passwordNumeric",blurredType:"passwordNumeric",label:"Password",maxContent:"0000000000",requiresAuthentication:!1},cardNumber:{permanent:!0,focusedType:"tel",blurredType:"tel",label:"Card number",autocorrect:"0000 0000 0000 0000 000    F    F    F    F???",maxContent:"0000000000000000000",requiresAuthentication:!1},cvv:{permanent:!0,focusedType:"tel",blurredType:"tel",label:"Card CVC/CVV",autocorrect:"0000   ?",maxContent:"0000",requiresAuthentication:!1},cardPin:{permanent:!1,focusedType:"tel",blurredType:"tel",label:"Card pin",autocorrect:"0000   ?",maxContent:"0000",requiresAuthentication:!0},passCode:{permanent:!1,focusedType:"passwordNumeric",blurredType:"passwordNumeric",label:"Passcode",autocorrect:"0000   ?",maxContent:"0000",requiresAuthentication:!1}}},{"../common/utils":14,events:1}],18:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),(r=n.FetchRequestMethod||(n.FetchRequestMethod={})).GET="GET",r.POST="POST"},{}]},{},[4]);
